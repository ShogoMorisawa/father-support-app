### ホーム画面

- 上部：今日の予定（例：「14:00 森沢様 見積もり」「16:00 川沢様 納品」）
    
- 下部：主要4ボタン
    
    1. **カレンダー**
        
    2. **作業一覧**
        
    3. **在庫状況**
        
    4. **顧客一覧**
        

---

### カレンダー

- 「見積もり」「納品」を日付に表示。
    
- 日付タップ → 下部にその日の予定一覧（モーダル表示）。
    
- 予定追加ボタンあり。
    
- 見積追加時：納品期日必須（未入力は保存不可）。
    
- Googleカレンダー連携は将来対応予定（現段階はローカル管理）。
    

---

### 作業一覧

- 全案件を納品期日順で一覧表示。
    
- 左端に期日バッジ（例：「8/17」）。
    
- 項目例：「8/17 モリサワ様 障子 かがやき 3枚 完了ボタン」
    
- 完了ボタン押下時：
    
    - 在庫減算
        
    - ステータス更新
        
    - **取り消し機能**（制限時間なしの「戻す」ボタンで何回でも可能）
        
    - 在庫閾値チェック（残り3回分以下→リスト上位＋アイコン表示）
        

---

### 在庫一覧

- 「障子」「網戸」で分類表示。
    
- 各項目：商品名／残量m／目安回数／発注ボタン。
    
- 残量が閾値以下：リスト上位表示＋警告アイコン（ホーム在庫ボタンにも通知アイコン）。
    
- 発注→納品受領時：
    
    - ＋m加算（ロール数→m換算ショートカットあり）
        
    - **調整履歴（監査ログ）**に必ず理由とメモ記録。
        
- 標準m/枚・閾値は空欄可（未設定時は「—」表示、警告なし）。
    

---

### 顧客一覧

- カナ・漢字・電話で横断検索。
    
- 同名・同電話は自動統合して同一顧客扱い。
    
- 各顧客：氏名（漢字＋カナ）／住所／メモ。
    
- **最終対応日を非正規化保持** → 一覧の並び替え高速化。
    
- タップで過去案件一覧（納品日順）：
    
    - 納品内容（種類・枚数）
        
    - 納品写真（複数一括追加可、EXIF回転補正＆圧縮自動化）
        
    - 案件メモ
        

---

### 写真アップロード

- 複数写真を一度に添付可。
    
- アップロード時に自動リサイズ＆圧縮（通信負荷軽減）。
    
- 向き自動補正（EXIF情報で回転）。
    
- 撮影日情報を案件に自動記録（証跡化）。
    

---

### データベース・技術設計

- 日時はDBではUTC保存、UI表示はJST変換。
    
- 完了時の在庫減算＋ステータス更新は**トランザクション**で原子的処理。
    
- 顧客テーブルに「最終対応日」カラムを持ち、毎回更新（非正規化）。
    
- 在庫調整は必ず履歴テーブルにINSERT（監査対応）。
    

---

### 将来拡張候補（保持）

- 部分納品（数量スプリット）
    
- 顧客契約管理（リピート案件用）
    
- NFCタグや音声メモ入力
    
- オフライン対応（PWA＋同期）
  
