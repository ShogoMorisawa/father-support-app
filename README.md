# 🧰 張り替え事業支援アプリ

障子・襖・網戸の張り替え業務を、**見積から納品まで一元管理**できる、地域密着型の**職人仕事に特化した軽量業務アプリ**です。

---

## 🎯 なぜ作ったか / What Inspired This

父が営む張り替え事業は、紙と記憶に頼った管理で成り立っていました。  
しかし実際の現場では、

- 在庫切れで作業が止まる  
- 納品や作業の予定が把握しづらい  
- 過去の顧客情報が探しにくい  

といった非効率が積み重なっていました。

> 「自分の学習してきた技術で、父の仕事が少しでも楽になるような親孝行ができたら」

という想いからこのアプリの開発を始めました。

---

## 🔧 主な機能 / Main Features

✅ 見積・作業・納品スケジュールの一元管理  
✅ 作業完了時の在庫自動減算と Undo 対応（原子的に実行）  
✅ 在庫のリアルタイム残量表示 + 閾値アラート  
✅ 顧客情報のカナ/漢字/電話横断検索（pg_trgm 活用）  
✅ 納品時の写真アップロード・証跡管理  
✅ 冪等性（Idempotency-Key）と監査ログによる安全な操作設計  
✅ モバイルファーストな UI（Next.js）

---

## 🧪 想定ユースケース / Use Cases

- 見積訪問中に、リアルタイム在庫を即確認したい  
- 作業完了と同時に在庫を自動で減らし、ミスなく納品に進みたい  
- 顧客からのリピート依頼時に、過去対応履歴や写真を素早く参照したい  
- 父ひとりでやっていた業務を、デジタルで補完・拡張したい

---

## 🧠 技術構成 / Tech Stack

| Layer        | Tech                                                  |
|--------------|-------------------------------------------------------|
| Frontend     | Next.js App Router / TypeScript / Tailwind CSS       |
| Backend      | Ruby on Rails API / PostgreSQL / Amazon S3           |
| Infra        | Docker / Kamal / AWS（App Runner + RDS + S3）         |
| State Mgmt   | React Query / React Hook Form / Zod                  |
| Auth / API   | OpenAPI準拠 / Idempotency-Key / Audit Logs           |

---

## ☁️ クラウド構成と耐障害性 / Cloud Infrastructure（予定）

| コンポーネント | 使用サービス         | 理由・利点                               |
|----------------|----------------------|------------------------------------------|
| APIサーバー     | AWS App Runner        | スケーラビリティ + 簡易CI/CD             |
| DB             | RDS for PostgreSQL    | データ永続性と拡張性                     |
| ストレージ      | Amazon S3 + Presigned URL | 写真アップロード・セキュアなURL生成  |
| ログ / 監査     | PostgreSQL + audit_logs | Undo 操作の逆操作保存対応              |

---

## 💡 設計の工夫と思想 / Design Philosophy

- **作業完了ボタン＝魔法のボタン**  
  ワンタップで在庫減算・納品準備・アラート処理まで一括実行。業務全体を 1 トランザクションで自動化。

- **Undo対応**  
  すべての操作に逆操作を保存し、任意タイミングで確実に復元できる構造。ミスを恐れずに使える UI。

- **冪等性（Idempotency）**  
  すべての変更系 API に `X-Idempotency-Key` を必須化。二重送信や再試行による重複登録を防止。

- **検索性の向上**  
  顧客名・フリガナ・電話番号などを `pg_trgm` により曖昧検索。ご高齢の方の手書き名にも柔軟に対応。

- **視覚化による直感操作**  
  在庫の閾値アラートや納品予定カード、色付きバッジなどにより「ひと目で伝わる」設計を重視。

---

## 📸 スクリーンショット / Screenshots

※現在整備中（開発ブランチより切り出し予定）

---

## 👨‍💻 開発者 / About Me

**名前**：森澤 翔吾（Shogo Morisawa）  
**大学**：立命館アジア太平洋大学（APU）  

**実績**：

- TOEIC 795 / 日商簿記3級 / AtCoder 緑ランク  
- React + Rails による SPA を複数個人開発・公開済み  
- AWS SAA（Solutions Architect Associate）合格

---

## 🚧 開発状況 / Development Status

- 現在は **MVP フェーズ**（v1.2仕様に基づく段階的実装）  
- 「作業完了 → 在庫減算 → Undo」までのコア機能は実装済み  
- フロントエンド・バックエンド・インフラはすべて自身で設計・構築

---

## ⚖️ セキュリティ・保守 / Security & Maintainability

- CORS / SQL Injection / XSS すべて対策済み  
- 操作履歴は `audit_logs` に保存し、逆操作による Undo 対応を実現  
- `Correlation-ID` によるリクエストトレース設計  
- プレリリースながら、再デプロイやストレージの初期化にも耐える安全設計を実装中

---

## 📈 ビジネス効果と実用性 / Impact

| 項目           | Before（従来）                 | After（本アプリ導入後）               |
|----------------|-------------------------------|----------------------------------------|
| 見積作成時間   | 紙で手書き・在庫状況は不明      | デジタル即作成・リアルタイム在庫表示   |
| 在庫切れ        | 頻繁に発生                     | 閾値アラートにより未然に防止           |
| 顧客対応        | 電話帳・記憶・紙の控え頼り       | 顧客履歴と納品写真を即時検索可能       |
| 写真管理        | スマホで個別保存・紛失リスク大   | アプリ内一括アップロード・証跡記録付き |

---

