### 【フェーズ1：基盤構築】（最重要）

1. **データベース設計の実装**
   - 「DBスキーマ v1.2.md」を基にマイグレーションファイル作成
   - PostgreSQLの`pg_trgm`拡張の有効化
   - 必須制約（期日必須、数量制約等）の実装

2. **Idempotency機構の実装**
   - 「実装前のさいごの「埋め」.md」で強調されている冪等性の実装
   - `X-Idempotency-Key`による重複処理防止

### 【フェーズ2：コア機能（使用感の認識合わせ重視）】

3. **見積もり → 作業化の流れ**
   - 「使用感の認識合わせ.md」の1-2番に対応
   - 電話受領 → 見積予定登録 → 契約成立で案件生成

4. **作業完了の「魔法ボタン」**
   - 使用感資料で最も重視されている機能
   - 完了時の在庫自動減算 + 閾値アラート + Undo機能

5. **在庫管理とクイックビュー**
   - 「どこでも在庫」機能（使用感資料の5番）
   - 閾値未満時のアラート + 発注メール生成

### 【フェーズ3：UI/UX実装】

6. **ホーム画面の実装**
   - 納品予定カード（3件）
   - 見積もり予定カード（新規追加）
   - 在庫クイックビューアイコン

7. **カレンダーとタスク管理**
   - 見積/納品/作業の統合カレンダー
   - 期日順のタスク一覧

### 【フェーズ4：拡張機能】

8. **写真アップロード機能**
   - 複数一括アップロード
   - 自動圧縮・EXIF回転補正

9. **顧客統合機能**
   - カナ+電話での自動統合ルール
   - 重複提案機能

### 【フェーズ5：インフラ・運用】

10. **AWS環境構築**
    - 「実装前のAWS設計.md」に基づく最小構成
    - App Runner + RDS + S3 + SES

## 特に重要なポイント

### 使用感の認識合わせを重視した設計判断：

1. **「完了ボタン」の原子性**
   - 作業完了 → 在庫減算 → 納品タスク生成 → アラート判定を一括処理
   - 失敗時は全てロールバック

2. **Undo機能の無制限対応**
   - `correlation_id`による操作の束ね
   - 逆操作の確実な保存と実行

3. **在庫の即時確認**
   - 見積外出中でも在庫残量を即確認
   - 閾値バッジによる視覚的警告

### 技術的な優先事項：

- **期日未設定ガード**：見積→作業化時の納品期日必須
- **トランザクション管理**：作業完了時の不可分処理
- **検索機能**：カナ/漢字/電話のクロス検索（pg_trgm）

この順序で実装することで、現場の実務フローを崩さずに、最も価値の高い機能から段階的に構築できます。特に「使用感の認識合わせ」で重視されている「完了ボタンの魔法」と「どこでも在庫確認」を早期に実現することが重要です。
